<div class="bar">
  <div id="search-section">
    <div class="dropdown" *ngIf="isItAnArticle()">
      <button
        class="dropdown-button"
        onclick="this.classList.toggle('dropdown-ouvert')"
      >
      <div class="tag" [ngClass]="'type-tag-'+this.typeOfDocuments">
        <p>{{ getDocumentType(this.typeOfDocuments) }}</p>
      </div>  
      
      
      <i class="fa-solid fa-chevron-down"></i>
      </button>
      <div class="dropdown-content" id="dropdown-type">
        <label for="dropdown-radio-sort-{{ e }}" *ngFor="let e of otherTypes">
          <a routerLink="/{{ e }}">
          <div class="dropdown-content-element">
            <div class="tag" [ngClass]="'type-tag-'+e">
              <p>{{ getDocumentType(e) }}</p>
            </div>  
            <p></p>
          </div>
        </a>
        </label>
      </div>
    </div>

  <div class="search-bar">
    <input
      type="text"
      class="search-bar-input"
      placeholder="Rechercher..."
      [formControl]="search"
      (keydown.enter)="onFormChange()"
    />

    <button
      class="search-bar-button"
      id="search-bar-button-search"
      (click)="onFormChange()"
    >
      <i class="fa-solid fa-magnifying-glass fa-xl"></i>
    </button>
  </div>
</div>


  <form class="search-filter" [formGroup]="filterForm">
    <div class="dropdown" *ngIf="isThereEnoughAuthors()">
      <button
        class="dropdown-button"
        onclick="this.classList.toggle('dropdown-ouvert')"
      >
        <i
          class="fa-solid fa-circle filter-selected-icon"
          [ngClass]="{ 'filter-selected-icon-hidden': isSelectedAuthors() }"
        ></i>
        Auteurs<i class="fa-solid fa-chevron-down"></i>
      </button>

      <div class="dropdown-content">
        <label
          for="dropdown-checkbox-auteurs-{{ e.surname.String }}"
          *ngFor="let e of authors; let i = index"
        >
          <div class="dropdown-content-element" formArrayName="authors">
            <p>{{ e.firstname.String }}</p>

            <input
              type="checkbox"
              class="custom-input"
              name="dropdown-checkbox-auteurs"
              id="dropdown-checkbox-auteurs-{{ e.surname.String }}"
              [formControlName]="i"
            />
          </div>
        </label>
      </div>
    </div>

    <div class="dropdown" *ngIf="isThereEnoughTags()">
      <button
        class="dropdown-button"
        onclick="this.classList.toggle('dropdown-ouvert')"
      >
        <i
          class="fa-solid fa-circle filter-selected-icon"
          [ngClass]="{ 'filter-selected-icon-hidden': isSelectedTags() }"
        ></i>
        Tags<i class="fa-solid fa-chevron-down"></i>
      </button>

      <div class="dropdown-content">
        <label
          for="dropdown-checkbox-tags-{{ e }}"
          *ngFor="let e of tags; let i = index"
        >
          <div class="dropdown-content-element" formArrayName="tags">
            <p>{{ e }}</p>

            <input
              type="checkbox"
              class="custom-input"
              name="dropdown-checkbox-tags"
              id="dropdown-checkbox-tags-{{ e }}"
              [formControlName]="i"
            />
          </div>
        </label>
      </div>
    </div>

    <div class="dropdown" *ngIf="isThereEnoughYears()">
      <button
        class="dropdown-button"
        onclick="this.classList.toggle('dropdown-ouvert')"
      >
        <i
          class="fa-solid fa-circle filter-selected-icon"
          [ngClass]="{ 'filter-selected-icon-hidden': isSelectedDates() }"
        ></i>
        Date<i class="fa-solid fa-chevron-down"></i>
      </button>

      <div class="dropdown-content">
        <label
          for="dropdown-checkbox-date-{{ e }}"
          *ngFor="let e of dates; let i = index"
        >
          <div class="dropdown-content-element" formArrayName="dates">
            <p>{{ e }}</p>

            <input
              type="checkbox"
              class="custom-input"
              name="dropdown-checkbox-date"
              id="dropdown-checkbox-date-{{ e }}"
              [formControlName]="i"
            />
          </div>
        </label>
      </div>
    </div>

    <div class="dropdown">
      <button
        class="dropdown-button"
        onclick="this.classList.toggle('dropdown-ouvert')"
      >
        <i class="fa-solid fa-circle filter-selected-icon"></i>
        Trier<i class="fa-solid fa-chevron-down"></i>
      </button>
      <div class="dropdown-content">
        <label for="dropdown-radio-sort-{{ e }}" *ngFor="let e of sort">
          <div class="dropdown-content-element">
            <p>{{ e }}</p>

            <input
              type="radio"
              class="custom-input"
              name="sort"
              id="dropdown-radio-sort-{{ e }}"
              formControlName="sort"
              [value]="e"
            />
          </div>
        </label>
      </div>
    </div>
    <button
      class="search-bar-button search-bar-button-reset"
      title="Réinitialiser les filtres"
      (click)="resetSearch()"
    >
      <i class="fa-regular fa-circle-xmark"></i
      ><span class="mobile-only">Réinitialiser les filtres</span>
    </button>
  </form>
</div>
